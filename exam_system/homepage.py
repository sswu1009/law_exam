import sys
import os

# é¡¯ç¤ºç•¶å‰å·¥ä½œç›®éŒ„
print("Current Working Directory:", os.getcwd())
# é¡¯ç¤º Python æœå°‹è·¯å¾‘
print("System Path:", sys.path)

import streamlit as st
from exam_system.ui import layout
from exam_system.ui import admin_panel
from exam_system.services import gemini_client

# 1. é é¢åˆå§‹åŒ– (è¨­å®š page_title, layout, ä¸¦é¡¯ç¤ºæ¨™æº–æ¨™é¡Œèˆ‡ä½¿ç”¨èªªæ˜)
# æ³¨æ„ï¼šsetup_page å·²ç¶“åŒ…å« set_page_config èˆ‡ st.title
layout.setup_page("é¦–é  - éŒ åµ‚AIè€ƒç…§ç³»çµ±")

# 2. ä¸»é å…§å®¹
st.markdown("""
## ğŸ¯ è«‹é¸æ“‡è€ƒè©¦æ¨¡å¼

è«‹é»æ“Šå·¦å´å´é‚Šæ¬„çš„é é¢é€²è¡Œæ“ä½œï¼š

- **ğŸ“ ç·´ç¿’æ¨¡å¼** (`pages/1_ç·´ç¿’æ¨¡å¼`)  
  é€é¡Œä½œç­”ï¼Œå¯éš¨æ™‚æŸ¥çœ‹ **ğŸ’¡ AI æç¤º**ï¼Œç­”å°ç«‹å³ç²å¾—åé¥‹ï¼Œé©åˆæ‰“åº•ç·´ç¿’ã€‚

- **ğŸ’¯ æ¨¡æ“¬è€ƒæ¨¡å¼** (`pages/2_æ¨¡æ“¬è€ƒæ¨¡å¼`)  
  å®Œæ•´æ¨¡æ“¬çœŸå¯¦è€ƒè©¦ï¼Œæœ‰æ™‚é–“é™åˆ¶ï¼Œäº¤å·å¾Œæä¾› **ğŸ¤– AI è©³è§£** èˆ‡ **ğŸ“Š éŒ¯é¡Œå¾©ç›¤**ã€‚

---

## âš™ï¸ ç³»çµ±åŠŸèƒ½èªªæ˜

**é—œæ–¼é¡Œåº«ï¼š**
*   ç³»çµ±æ”¯æ´ **äººèº« / æŠ•è³‡å‹ / å¤–å¹£** ä¸‰å¤§é¡é¡Œåº«ã€‚
*   å¯è®€å– **å–®ä¸€ Excel æª”** æˆ– **è‡ªå‹•åˆä½µ** è©²é¡å‹ä¸‹æ‰€æœ‰æª”æ¡ˆã€‚
*   æ”¯æ´ GitHub é›²ç«¯é¡Œåº«è®€å–èˆ‡å¯«å…¥ã€‚

**é—œæ–¼ AI åŠ©æ•™ï¼š**
*   å…§å»º Google Gemini æ¨¡å‹ã€‚
*   ç·´ç¿’æ™‚æä¾›ã€Œä¸çˆ†é›·æç¤ºã€ã€‚
*   è€ƒå¾Œæä¾›ã€ŒéŒ¯é¡Œåˆ†æã€èˆ‡ã€Œå¼±é»ç¸½çµã€ã€‚

""")

# 3. å´é‚Šæ¬„ - é¡¯ç¤ºç®¡ç†è€…é¢æ¿
# é¦–é ä¸éœ€è¦ "è€ƒè©¦è¨­å®š" (æŠ½é¡Œæ•¸ç­‰)ï¼Œå› æ­¤åªé¡¯ç¤ºç®¡ç†è€…é¢æ¿ä¾›ç¶­è­·ç”¨
with st.sidebar:
    st.header("âš™ï¸ ç³»çµ±è¨­å®š")
    st.info("ğŸ‘ˆ è«‹å¾ä¸Šæ–¹é¸å–®é¸æ“‡æ¨¡å¼é–‹å§‹è€ƒè©¦")
    
    st.divider()
    # å‘¼å« ui/admin_panel.py ä¸­çš„æ¸²æŸ“å‡½å¼
    admin_panel.render_admin_panel()

# 4. é å°¾ç‹€æ…‹åˆ—
st.divider()
ai_status = "âœ… å·²å•Ÿç”¨" if gemini_client.is_ready() else "âŒ æœªå•Ÿç”¨ï¼ˆè«‹æ–¼ secrets è¨­å®š GEMINI_API_KEYï¼‰"
st.caption(f"ğŸ’¡ AI åŠ©æ•™ç‹€æ…‹ï¼š{ai_status}")
